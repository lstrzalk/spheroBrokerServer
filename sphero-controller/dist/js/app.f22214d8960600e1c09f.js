webpackJsonp([1],{"/626":function(e,t){},"3TcT":function(e,t){},AV9H:function(e,t){},FbEL:function(e,t){},"HNa/":function(e,t){},JtGZ:function(e,t){},LGiM:function(e,t){},"N+IJ":function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),s={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("Rotaiton")])},staticRenderFns:[]};var o=n("VU/8")(null,s,!1,function(e){n("JtGZ")},"data-v-48f95e33",null).exports,r=n("Zrlr"),c=n.n(r),a=n("wxAW"),u=n.n(a),h={data:function(){return{model:null}},mounted:function(){var e=this;window.addEventListener("load",function(){var t=new l(e.$el),n=new d(t.widthCenter(),t.heightCenter(),.7*t.determineScreenOrientation(),"outer-circle",t,null,e.$refs.oc),i=new d(t.widthCenter(),t.heightCenter(),.3*t.determineScreenOrientation(),"inner-circle",t,n,e.$refs.ic);t.appendNewEventListener("mousemove",i.circleMouseMove,i),t.appendNewEventListener("mouseup",i.mouseMoveEnd,i)})},name:"Joystick"},l=function(){function e(t){c()(this,e),this.instance=t}return u()(e,[{key:"appendNewEventListener",value:function(e,t,n){this.instance.addEventListener(e,t.bind(n),!1)}},{key:"svgWidth",value:function(){return this.instance.clientWidth}},{key:"svgHeight",value:function(){return this.instance.clientHeight}},{key:"addElement",value:function(e){this.instance.appendChild(e)}},{key:"heightCenter",value:function(){return this.svgHeight()/2}},{key:"widthCenter",value:function(){return this.svgWidth()/2}},{key:"determineScreenOrientation",value:function(){return this.svgWidth()>this.svgHeight()?this.heightCenter():this.widthCenter()}}]),e}(),d=function(){function e(t,n,i,s,o,r,a){c()(this,e),this.cx=t,this.cy=n,this.r=i,this.id=s,this.svg=o,this.parent=r,this.offset=window.innerHeight-this.svg.svgHeight(),this.instance=this.createCircle(a)}return u()(e,[{key:"createCircle",value:function(e){var t=e;return t.setAttributeNS(null,"cx",this.cx),t.setAttributeNS(null,"cy",this.cy),t.setAttributeNS(null,"r",this.r),this.parent&&(this.appendNewEventListener("touchmove",this.circleTouch,t),this.appendNewEventListener("touchend",this.circleTouchEnd,t),this.appendNewEventListener("mousedown",this.circleMouseMoveStart,t),this.appendNewEventListener("mouseup",this.mouseMoveEnd,t),this.appendNewEventListener("mousemove",this.circleMouseMove,t)),t.id=this.id,t}},{key:"appendNewEventListener",value:function(e,t,n){n.addEventListener(e,t.bind(this),!1)}},{key:"circleMouseClickOrTouched",value:function(e,t){if(this.getDistance(e,t)<=this.parent.r)window.requestAnimationFrame(this.makeStepForward(e,t));else{var n=this.getCos(e,t,this.svg.widthCenter(),this.svg.heightCenter()),i=this.getSin(e,t,this.svg.widthCenter(),this.svg.heightCenter()),s=this.parent.r;window.requestAnimationFrame(this.makeStepForward(n*s+this.svg.widthCenter(),i*s+this.svg.heightCenter()))}}},{key:"circleTouch",value:function(e){this.circleMouseClickOrTouched(e.touches[0].clientX,e.touches[0].clientY-this.offset)}},{key:"circleMouseMove",value:function(e){this.enableCircleMove&&this.circleMouseClickOrTouched(e.x,e.y)}},{key:"circleTouchEnd",value:function(e){for(var t=this.getDistance(this.cx,this.cy);t>0;)window.requestAnimationFrame(this.makeStepBack(t)),t-=.1;t=0,window.requestAnimationFrame(this.makeStepBack(t))}},{key:"mouseMoveEnd",value:function(e){this.enableCircleMove&&(this.circleTouchEnd(e),this.enableCircleMove=!1)}},{key:"circleMouseMoveStart",value:function(e){this.enableCircleMove=!0}},{key:"getDistance",value:function(e,t){var n=this.svg.widthCenter()-e,i=this.svg.heightCenter()-t,s=Math.pow(n,2)+Math.pow(i,2);return Math.sqrt(s)}},{key:"getCos",value:function(e,t,n,i){return Math.cos(Math.atan2(t-i,e-n))}},{key:"getSin",value:function(e,t,n,i){return Math.sin(Math.atan2(t-i,e-n))}},{key:"makeStepForward",value:function(e,t){return function(){this.updateCoords(e,t)}.bind(this)}},{key:"makeStepBack",value:function(e){return function(){this.updateCoords(e*this.getCos(this.cx,this.cy,this.svg.widthCenter(),this.svg.heightCenter())+this.svg.widthCenter(),e*this.getSin(this.cx,this.cy,this.svg.widthCenter(),this.svg.heightCenter())+this.svg.heightCenter())}.bind(this)}},{key:"setAttr",value:function(e,t){this.instance.setAttributeNS(null,e,t)}},{key:"updateCx",value:function(e){this.cx=e,this.setAttr("cx",this.cx)}},{key:"updateCy",value:function(e){this.cy=e,this.setAttr("cy",this.cy)}},{key:"setR",value:function(e){this.r=e}},{key:"updateCoords",value:function(e,t){this.updateCx(e),this.updateCy(t)}}]),e}(),v={render:function(){var e=this.$createElement,t=this._self._c||e;return t("svg",{attrs:{id:"controller"}},[t("circle",{ref:"oc",attrs:{id:"outer-circle"}}),this._v(" "),t("circle",{ref:"ic",attrs:{id:"inner-circle"}})])},staticRenderFns:[]};var f=n("VU/8")(h,v,!1,function(e){n("AV9H")},"data-v-309d323a",null).exports,p={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"picker",class:{picked:e.index===e.picked},style:{backgroundColor:e.color},on:{click:function(t){e.pickColor()}}})},staticRenderFns:[]};var k=n("VU/8")({props:["color","index","picked"],data:function(){return{}},mounted:function(){},methods:{pickColor:function(){this.$emit("change-color",this.index)}},name:"Color"},p,!1,function(e){n("o+XP")},"data-v-c51a5afa",null).exports,g=function(){function e(){c()(this,e),console.log("init"),this.commands={colors:["setLed_red","setLed_blue","setLed_green","setLed_white","setLed_black"],move:[]},this.socket=new WebSocket("ws://localhost:8080"),this.socket.onmessage=function(e){console.log(e.data)}}return u()(e,[{key:"sendCommand",value:function(e,t){this.socket.send(this.commands[e][t])}}]),e}(),m={data:function(){return{colors:["#A62639","#59C3C3","#9FD356","#F1DAC4","#0A100D"],pickedColor:0,bgc:{backgroundColor:"#A62639AA"},socket:new g}},mounted:function(){this.setBackgroundColor()},methods:{setBackgroundColor:function(){this.bgc.backgroundColor=this.colors[this.pickedColor]+"44"},changeColor:function(e){this.pickedColor=e,this.setBackgroundColor(),this.socket.sendCommand("colors",this.pickedColor)}},name:"Colors",components:{ColorPicker:k}},C={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"background",style:e.bgc},e._l(e.colors,function(t,i){return n("color-picker",{attrs:{color:t,index:i,picked:e.pickedColor},on:{"change-color":e.changeColor}})}))},staticRenderFns:[]};var w=n("VU/8")(m,C,!1,function(e){n("dDH7")},"data-v-48b5414a",null).exports,y=n("mvHQ"),b=n.n(y),M=function e(){c()(this,e),this.sendFirstRequest=function(){var e=new XMLHttpRequest;e.open("GET","/spheroController/config",!0);var t=this;e.onreadystatechange=function(){if(e.readyState==XMLHttpRequest.DONE){var n=e.responseText;t.config=JSON.parse(n)}},e.send(null)},this.sendLastRequest=function(){var e=new XMLHttpRequest;e.open("POST","/game/end",!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.send(b()({result:0,group:this.group,nick:this.nick,age:this.age})),e.onreadystatechange=function(){e.readyState==XMLHttpRequest.DONE&&window.location.replace(e.responseText)}},this.sendFirstRequest()},_={data:function(){return{model:null,serverApp:new M}},name:"App",components:{Rotation:o,Joystick:f,Colors:w}},x={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-toolbar",{attrs:{dark:!0,tabs:""}},[n("v-toolbar-title",[e._v("Sphero Controller")]),e._v(" "),n("v-tabs",{attrs:{slot:"extension",grow:""},slot:"extension",model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},[n("v-tab",{attrs:{href:"#joystick"}},[e._v("Joystick")]),e._v(" "),n("v-tab",{attrs:{href:"#colors"}},[e._v("Colors")])],1)],1),e._v(" "),n("v-tabs-items",{class:"tabs",model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},[n("v-tab-item",{class:"tab",attrs:{id:"joystick"}},[n("joystick")],1),e._v(" "),n("v-tab-item",{class:"tab",attrs:{id:"colors"}},[n("colors")],1)],1),e._v(" "),n("v-footer",{attrs:{fixed:!0,dark:!0,app:""}},[n("span",[e._v("© 2018")]),e._v(" "),n("v-spacer"),e._v(" "),n("span",[e._v("Łukasz Strzałka")])],1),e._v(" "),n("socket-service")],1)},staticRenderFns:[]};var E=n("VU/8")(_,x,!1,function(e){n("dp1l")},"data-v-5e0ff08b",null).exports,F=n("M+UZ"),A=n.n(F),S=n("IcMm"),L=n.n(S),N=n("rPQa"),H=n.n(N),V=n("TWha"),T=n.n(V),R=n("fYhH"),O=n.n(R),q=n("7Q1V"),D=n.n(q),B=n("7M7f"),J=n.n(B),X=n("JUsQ"),$=n.n(X),P=n("+9ps"),U=n.n(P),W=n("6/SM"),Z=n.n(W),j=n("f/u0"),G=n.n(j),Q=n("6VHA"),z=n.n(Q);n("s6ZO");i.a.use(A.a,{components:{VApp:L.a,VNavigationDrawer:H.a,VFooter:T.a,VList:O.a,VBtn:D.a,VIcon:J.a,VGrid:$.a,VToolbar:U.a,VTabs:Z.a,VCard:G.a,transitions:z.a},theme:{primary:"#52154E",secondary:"#323031",accent:"#FBFFF1",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}}),i.a.config.productionTip=!1,i.a.config.devtools=!0,i.a.config.silent=!0,new i.a({el:"#app",components:{App:E},template:"<App/>"})},NOHZ:function(e,t){},P0ba:function(e,t){},"X05+":function(e,t){},XC5Q:function(e,t){},acBN:function(e,t){},dDH7:function(e,t){},dp1l:function(e,t){},kP4z:function(e,t){},kVeV:function(e,t){},"o+XP":function(e,t){},pu2v:function(e,t){},s6ZO:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.f22214d8960600e1c09f.js.map